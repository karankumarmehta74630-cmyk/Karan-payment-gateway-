<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Karan Payment Dashboard</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Poppins}
body{
background:linear-gradient(135deg,#0f172a,#1e3a8a);
min-height:100vh;
display:flex;
justify-content:center;
align-items:center;
padding:20px;
}
.card{
background:#fff;
width:420px;
padding:20px;
border-radius:15px;
box-shadow:0 25px 50px rgba(0,0,0,0.3);
}
.header{
background:#1e40af;
color:#fff;
padding:12px;
border-radius:10px;
text-align:center;
font-weight:600;
margin-bottom:15px;
}
input{
width:100%;
padding:10px;
margin-top:10px;
border:1px solid #ccc;
border-radius:6px;
}
button{
width:100%;
padding:10px;
margin-top:10px;
border:none;
border-radius:6px;
background:#1e40af;
color:#fff;
font-weight:600;
cursor:pointer;
}
#qrcode{text-align:center;margin-top:10px}
.user{font-size:14px;margin-bottom:10px}
</style>
</head>
<body>

<div class="card">

<div class="header">Karan Payment Dashboard</div>

<div class="user" id="userInfo"></div>

<input type="number" id="amount" placeholder="Enter Amount ₹">
<button onclick="generateQR()">Generate QR</button>

<div id="qrcode"></div>

<button onclick="logout()">Logout</button>

</div>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyBWfnQ9KFDWA5V9_VfqQdWd-vL-psdcqTA",
  authDomain: "karanchatapp-e0b1d.firebaseapp.com",
  projectId: "karanchatapp-e0b1d",
  appId: "1:992252113506:web:c55091651550918a43173b"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

onAuthStateChanged(auth,user=>{
if(!user){
window.location.href="login.html";
}else{
document.getElementById("userInfo").innerText="Logged in as: "+(user.displayName || user.email);
}
});

window.logout=function(){
signOut(auth).then(()=>window.location.href="login.html");
}

window.generateQR=function(){
let amt=amount.value;
if(!amt || amt<=0){alert("Enter valid amount");return;}
document.getElementById("qrcode").innerHTML="";
new QRCode(document.getElementById("qrcode"),{
text:"Amount: ₹"+amt,
width:200,
height:200
});
}

</script>

</body>
</html>
